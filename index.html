---
layout: base
title: Aaron Franks
---

<div class="hp_canvas_wrap">
    <canvas></canvas>
</div>

<script>
    (function(){
        var frameWait = 80;     // Time in ms to wait in between frames
        var reqFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                    window.webkitRequestAnimationFrame || window.msRequestAnimationFrame ||
                    function(cb) { setTimeout(cb, frameWait); };
        var canvas = document.querySelector('canvas');
        var ctx = canvas.getContext('2d');
        var width = canvas.width = window.screen.width;
        var height = canvas.height = window.screen.height;
        var boxsize = 10;
        var guttersize = 1;
        var wsteps = Math.ceil(width/boxsize);
        var hsteps = Math.ceil(height/boxsize);
        var dirty = true;

        // Initialize each square with a random state (1 or 0):
        var lifeState = [];
        var nextState = [];
        var temp;
        for (var i=0; i<hsteps; i++) {
            lifeState[i] = [];
            nextState[i] = [];
            for (var j=0; j<wsteps; j++) {
                lifeState[i][j] = Math.round(Math.random() - 0.4);
            }
        }

        function updateLife() {
            for (var i=0; i<hsteps; i++) {
                var lefti = (i + hsteps - 1) % hsteps;
                var righti = (i + 1) % hsteps;
                for (var j=0; j<wsteps; j++) {
                    var leftj = (j + hsteps - 1) % hsteps;
                    var rightj = (j + 1) % hsteps;
                    var neighbourSum = lifeState[lefti][leftj] + lifeState[lefti][j] + lifeState[lefti][rightj] +
                                       lifeState[i][leftj]     +                       lifeState[i][rightj] +
                                       lifeState[righti][leftj] + lifeState[righti][j] + lifeState[righti][rightj];
                    var makeAlive = (neighbourSum === 3) || (neighbourSum === 2 && lifeState[i][j]);
                    nextState[i][j] = makeAlive ? 1 : 0;
                }
            }
            temp = lifeState;
            lifeState = nextState;
            nextState = temp;
            dirty = true;
        }
        setInterval(updateLife, 200);

        function drawCanvas() {
            if (dirty) {
                ctx.fillStyle = 'rgba(139,200,75,0.2)';
                ctx.fillRect(0,0, width, height);

                ctx.fillStyle = 'rgba(255,255,255,0.6)';
                for (var i=0; i<hsteps; i++) {
                    for (var j=0; j<wsteps; j++) {
                        if (lifeState[i][j]) {
                            ctx.fillRect(j*boxsize, i*boxsize, boxsize - guttersize, boxsize - guttersize);
                        }
                    }
                }
                dirty = false;
            }
            reqFrame(drawCanvas);
        }

        reqFrame(drawCanvas);
    }());
</script>
