@require "_common"

@keyframes pulseSize
    0%
        transform: scale(1)
    30%
        transform: scale(1.2)
    70%
        transform: scale(1)

@keyframes pulseOpacity
    0%
        opacity: 1
    100%
        opacity: 0.6


// Homepage styles
section.homepage
    margin: 2rem 0
    position: relative

    &.loading:before
        content: 'Loading data...'
        animation: 1s pulseOpacity alternate infinite
        color: #999
        position: absolute
        width: 100%
        margin: 5rem
        pointer-events: none
        text-align: center
        font-style: italic

    &.loading.failed:before
        content: "Sorry, failed to load the data. Refresh and try again?"

    h2
        margin: 0
        text-transform: lowercase
        color: #444
        font-weight: 300

    &.code
        height: 350px

        a
            color: rgba($colours.sections.code, 0.6)

    &.posts
        height: 200px

        a
            color: $colours.sections.posts

    &.links
        height: 380px

        a
            color: $colours.sections.links

svg.homeChart
    display: block
    width: 100%
    height: 100%

    .xAxis
        fill: #ddd

        text
            fill: #ddd
            font-size: 1.5rem
            font-family: $mainFont

        path
            stroke: none   // Disable long horizontal line
            fill: none
        line
            stroke: #eee
            stroke-width: 1px

    circle
        transition: fill 0.3s

        &:hover
            animation: 0.5s pulseSize
            fill: black

.codeWrapper
    transform: translate(0, 5vh)
.postWrapper
    transform: translate(0, 40vh)
.linkWrapper
    transform: translate(0, 60vh)

.chartTitle
    opacity: 0.2
    transform: translate(2rem, 0)
    font-weight: 300
    font-size: 2rem
    font-style: italic


.postChart, .linkChart
    .tooltip
        opacity: 0
        pointer-events: none
        transform: translateX(-5px)
        transition: all 0.4s 0.1s

    .date
        font-size: 0.8rem

    a:hover .tooltip
        opacity: 1
        transform: translateX(0)

    line
        pointer-events: none
        transform-origin: top
        transform: scaleY(0)
        transition: all 0.2s
        stroke: black
    a:hover line
        transform: scaleY(1)

    circle
        fill: rgba($colours.sections.posts, 0.8)

.linkChart
    circle
        fill: rgba($colours.sections.links, 0.5)

    .linkLabel
        font-size: 0.9rem
        display: block
        fill: #999


.codeChart
    g.repo
        path
            transition: opacity 0.5s
            opacity: 0.5
            fill: rgba($colours.sections.code, 0.8)

        a
            transition: all 0.4s

            &:hover *
                opacity: 1

        text
            fill: #333
            font-size: 1rem
            opacity: 0
            transition: all 0.4s

            &.name
                opacity: 1

            tspan.language
                fill: #999
                font-size: 0.9em

            .description
                opacity: 0
                font-size: 0.8rem

        &:hover .description
            opacity: 1

        rect
            fill: transparent
